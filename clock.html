<html>
<head>
  <title>Big Clock</title> 
</head>
<body>
  
  <div class="outer-wrapper">
    
    <div class="clock">
      <div class="clock-text">
        <span id="clock-hours" class="digits">88</span><span class="colon">:</span><span id="clock-minutes" class="digits">88</span>
      </div>
    </div>
    
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        let minAnimationFlag = false;
        
        function update(force = false) {
          const wrapper = document.querySelector('.clock');
          const wrapperW = wrapper.offsetWidth;
          const wrapperH = wrapper.offsetHeight;
          
          const clock = wrapper.children[0];
          const clockW = clock.offsetWidth;
          const clockH = clock.offsetHeight;
          
          const now = new Date();
          const hours = now.getHours();
          const minutes = now.getMinutes();
          const seconds = now.getSeconds();
          const minString = String(minutes).padStart(2, '0');
          
          if (force) {
            document.getElementById('clock-hours').innerHTML = String(hours).padStart(2, '0');
            document.getElementById('clock-minutes').innerHTML = `${minString}`;
          } else {
            
            if (minutes === 0 && seconds < 5) // minimize the amount of times the element is updated
            document.getElementById('clock-hours').innerHTML = String(hours).padStart(2, '0');
            
            if (!minAnimationFlag && seconds >= 55) {
              minAnimationFlag = true;
              document.getElementById('clock-minutes').innerHTML = `${minString.slice(0,1)}<span class="last-char animate">${minString.slice(1)}</span>`;
            }
            else if (seconds < 5) { // accounts for some lag with setInterval
              minAnimationFlag = false;
              document.getElementById('clock-minutes').innerHTML = `${minString}`;
            }
            
          }
          
          
          // adjust based on font
          const flatAdjustment = [-100, 0]; // x , y
          const translateYAdjustment = -6;
          
          clock.style.transform = `
            translateY(${(wrapperH - clockH) / translateYAdjustment}px)
            scale(${(wrapperW / clockW) + flatAdjustment[0]},
            ${(wrapperH / clockH) + flatAdjustment[1]})`;
        }
        
        setInterval(update, 1000);
        update(true);
        
      });
    </script>
    
    <style>
      body, html {
        margin: 0;
        padding: 0;
        width: 100%;
        height: 100%;
        background-color: #111;
        overflow: hidden;
      }
      
      .outer-wrapper {
        width: 100vw;
        height: 100vh;
        display: flex;
        justify-content: center;
        align-items: center;
      }
      
      .clock {
        width: calc(100vw - 80px);
        height: calc(100vh - 80px);
        display: flex;
        justify-content: center;
        align-items: center;
        font-size: 1px;
        font-family: 'Times New Roman', Times, serif;
        color: #a1a1a1;
      }
      
      .clock > div {
        white-space: nowrap;
        overflow: visible;
        transform-origin: center;
        margin: 1px;
      }
      
      @keyframes fadeCycle {
        0% {
          opacity: 0;
          color: #d27b7b;
        }
        50% {
          opacity: 1;
          color: #a1a1a1;
        }
        100% {
          opacity: 0;
          color: #d27b7b;
        }
      }
      
      @keyframes fadeOut1m {
        0% {
          opacity: 1;
          color: #a1a1a1;
        }
        100% {
          opacity: 0;
          color: #d27b7b;
        }
      }
      
      .clock .colon {
        animation: fadeCycle 5s infinite; 
      }
      
      .clock .digits .last-char {
        opacity: 1;
      }
      
      .clock .digits .last-char.animate {
        animation: fadeOut1m 7s 1 forwards;
      }
      
      
    </style>
  </body>
  </html>